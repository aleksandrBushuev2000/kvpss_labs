!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(5)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i,o=function(){function t(){this.subscribers=[]}return t.prototype.pushSubscriber=function(t){this.subscribers.push(t)},t.prototype.emitEvent=function(t){this.subscribers.forEach((function(e){return e.handleEvent(t)}))},t}(),r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(e){var n=t.call(this)||this;return n.options=e,n}return r(e,t),e.prototype.render=function(t){this.renderedNode=this.makeNode(),t.append(this.renderedNode),this.rendered=!0},e}(o),a=function(){},u=function(){},p=(n(1),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),c=function(t){function e(e){var n=t.call(this,e)||this;return n.WRAPPER_CLASS_NAME="button-wrapper",n.BUTTON_CLASS_NAME="btn btn-success",n.state=new a,n.state.disabled=!1,n}return p(e,t),e.prototype.destroy=function(){this.rendered&&(this.button.onclick=null,this.renderedNode.remove())},e.prototype.setDisabled=function(){this.state.disabled=!0,this.button.disabled=this.state.disabled},e.prototype.setEnabled=function(){this.state.disabled=!1,this.button.disabled=this.state.disabled},e.prototype.makeNode=function(){var t=this,e=document.createElement("div");e.classList.add(this.WRAPPER_CLASS_NAME);var n=document.createElement("button");return n.className=this.BUTTON_CLASS_NAME,n.innerText=this.options.buttonText,e.append(n),n.onclick=function(e){e.preventDefault();var n=new u;n.name="click",n.data=null,n.target=t,t.subscribers.forEach((function(t){return t.handleEvent(n)}))},this.button=n,e},e}(s),l=(n(2),function(){function t(t){this.FORM_GROUP_BOOTSTRAP_CLASS="form-group",this.SUBMIT_BUTTON_TEXT="Отправить",this.SUBMIT_BUTTON_WRAPPER_CLASS="submit-button__wrapper",this.formInputs=[],this.options=t,this.submitInput=new c({buttonText:this.options.submitButtonText||this.SUBMIT_BUTTON_TEXT}),this.submitInput.pushSubscriber(this)}return t.prototype.handleEvent=function(t){"input"!=t.name||t.target==this.submitInput||this.options.allowClickIfInvalid?"click"==t.name&&t.target==this.submitInput&&(this.submit(),console.log(t)):this.checkNeedEnableButton()?this.submitInput.setEnabled():this.submitInput.setDisabled()},t.prototype.checkNeedEnableButton=function(){return!(this.options.needValidate&&!this.options.allowClickIfInvalid)||this.formInputs.reduce((function(t,e){var n=e.validate().getValidState();return!0===t&&n}),!0)},t.prototype.push=function(t){this.formInputs.push(t),t.pushSubscriber(this),this.rendered&&t.render(this.inputsWrapper)},t.prototype.pop=function(){this.formInputs.length>0&&this.formInputs[this.formInputs.length-1].destroy()},t.prototype.render=function(t){var e=document.createElement("form");e.autocapitalize="off",e.autocomplete="off",e.spellcheck=!1;var n=document.createElement("div");n.classList.add(this.FORM_GROUP_BOOTSTRAP_CLASS),this.formInputs.forEach((function(t){return t.render(n)})),this.rendered=!0,e.append(n),t.append(e);var i=document.createElement("div");i.classList.add(this.SUBMIT_BUTTON_WRAPPER_CLASS),this.submitInput.render(i),e.append(i),this.inputsWrapper=n,this.renderedNode=e,this.options.allowClickIfInvalid||this.checkNeedEnableButton()||this.submitInput.setDisabled()},t.prototype.destroy=function(){this.rendered&&(this.formInputs.map((function(t){return t.destroy()})),this.submitInput.destroy(),this.renderedNode.remove())},t.prototype.validate=function(){return this.formInputs.reduce((function(t,e){var n=e.validateAndSetClasses();return!0===t&&n}),!0)},t.prototype.submit=function(){this.options.needValidate?this.validate()&&this.options.submitCallback(this.formInputs.map((function(t){return t.getPayload()}))):this.options.submitCallback(this.formInputs.map((function(t){return t.getPayload()})))},t}()),d=function(){},h=function(){function t(t,e){this.isValid=t,this.invalidReason=e}return t.prototype.getValidState=function(){return this.isValid},t.prototype.getInvalidReason=function(){return this.invalidReason},t}(),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e}(Error),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.makeNode=function(){return null},e.prototype.isRendered=function(){return this.rendered},e.prototype.render=function(t){if(this.rendered)throw new m("This component has been already rendered");this.renderedNode=this.makeNode(),t.append(this.renderedNode),this.rendered=!0},e}(o),b=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=!1),void 0===n&&(n=!1),this.input=t,this.focused=e,this.hasFirstFocus=n},A=function(t,e){this.name=t,this.data=e},y=(n(3),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}()),E=function(t){function e(e){var n=t.call(this)||this;return n.BOOTSTRAP_INVALID_CLASS="is-invalid",n.BOOTSTRAP_VALID_CLASS="is-valid",n.BOOTSTRAP_FORM_CONTROL="form-control",n.BOOTSTRAP_INVALID_FEEDBACK="invalid-feedback",n.TEXT_INPUT_MAP_NAME="text-input",n.INVALID_FEEDBACK_MAP_NAME="invalid-feedback",n.DEFAULT_INVALID_MESSAGE="Поле не может быть пустым",n.INVALID_FEEDBACK_INVISIBLE="invalid-feedback-invisible",n.WRAPPER_CLASS_NAME="form-input__wrapper",n.importantHtmlElements=new Map,n.options=e,n.state=new b,n.isTextarea="textarea"==e.inputType,n}return y(e,t),e.prototype.getPayload=function(){return new A(this.state.input,this.options.inputName)},e.prototype.getState=function(){return Object.assign(this.state,{})},e.prototype.setState=function(t){this.state.input=t.input,this.state.focused=t.focused,this.state.hasFirstFocus=t.hasFirstFocus,this.importantHtmlElements.get(this.TEXT_INPUT_MAP_NAME).value=this.state.input,this.validateAndSetClasses()},e.prototype.validateAndSetClasses=function(){if(this.options.needValidate){var t=this.importantHtmlElements.get(this.TEXT_INPUT_MAP_NAME),e=this.importantHtmlElements.get(this.INVALID_FEEDBACK_MAP_NAME),n=this.validate(),i=n.getValidState();return i?(t.classList.remove(this.BOOTSTRAP_INVALID_CLASS),t.classList.add(this.BOOTSTRAP_VALID_CLASS),e.classList.add(this.INVALID_FEEDBACK_INVISIBLE)):(t.classList.remove(this.BOOTSTRAP_VALID_CLASS),t.classList.add(this.BOOTSTRAP_INVALID_CLASS),e.innerText=n.getInvalidReason(),e.classList.remove(this.INVALID_FEEDBACK_INVISIBLE)),i}return!0},e.prototype.isSpacesMultiply=function(){var t=this.state.input.length-1,e=this.state.input;return e.length>1&&e[t]==e[t-1]&&" "==e[t]},e.prototype.makeLabel=function(){var t=document.createElement("label");return t.htmlFor=this.options.inputName||this.TEXT_INPUT_MAP_NAME,t.innerText=this.options.labelText||"",t},e.prototype.makeTextInput=function(){var t;return this.isTextarea?t=document.createElement("textarea"):(t=document.createElement("input")).type=this.options.inputType,t.className=this.BOOTSTRAP_FORM_CONTROL,t.name=this.options.inputName||this.TEXT_INPUT_MAP_NAME,t.placeholder=this.options.placeholder||"",t},e.prototype.makeFeedback=function(){var t=document.createElement("div");return t.classList.add(this.BOOTSTRAP_INVALID_FEEDBACK,this.INVALID_FEEDBACK_INVISIBLE),t},e.prototype.createEvent=function(t){var e=new u;return e.data=this.getState(),e.name=t,e.target=this,e},e.prototype.makeNode=function(){var e=this;t.prototype.makeNode.call(this);var n=document.createElement("div");this.options.inputId&&(n.id=this.options.inputId);var i=this.makeLabel(),o=this.makeTextInput(),r=this.makeFeedback();return n.append(i,o,r),n.className=this.WRAPPER_CLASS_NAME,this.importantHtmlElements.set(this.TEXT_INPUT_MAP_NAME,o),this.importantHtmlElements.set(this.INVALID_FEEDBACK_MAP_NAME,r),o.oninput=function(){e.state.input=o.value,!e.options.allowMultipleSpaces&&e.isSpacesMultiply()&&(o.value=o.value.substring(0,o.value.length-1),e.state.input=o.value),e.validateAndSetClasses(),e.emitEvent(e.createEvent("input"))},o.onfocus=function(){e.state.focused=!0,e.state.hasFirstFocus=!0;new u;e.emitEvent(e.createEvent("focus"))},o.onblur=function(){e.state.focused=!1,e.state.hasFirstFocus&&e.validateAndSetClasses(),e.emitEvent(e.createEvent("blur"))},n},e.prototype.validate=function(){var t=this;if(this.options.needValidate){var e=this.state.input,n=this.options.validateFunction;return n||(n=function(e){return e.length>0?new h(!0,""):new h(!1,t.DEFAULT_INVALID_MESSAGE)}),n(e)}return new h(!0,"")},e.prototype.destroy=function(){if(this.rendered){var t=this.importantHtmlElements.get(this.TEXT_INPUT_MAP_NAME);t.oninput=null,t.onfocus=null,t.onblur=null,this.renderedNode.remove()}},e}(v),I=function(){function t(t){this.formInstance=new l(t)}return t.prototype.buildNameInput=function(){var t=new d;t.inputType="text",t.allowMultipleSpaces=!1,t.inputName="input-name",t.labelText="Ваше имя",t.placeholder="Ваше имя (5 - 15 символов)",t.needValidate=!0,t.validateFunction=function(t){var e=t.split(" ").join("").length;return 0==e?new h(!1,"Поле не может быть пустым"):e<5?new h(!1,"Поле должно содержать более 5 символов"):e>15?new h(!1,"Поле должно содержать менее 15 символов"):/[^a-zA-zА-Яа-яыё\s]/.test(t)?new h(!1,"Поле должно содержать только буквы русского или латинского алфавита"):new h(!0,"")};var e=new E(t);this.formInstance.push(e)},t.prototype.buildEmailInput=function(){var t=new d;t.allowMultipleSpaces=!1,t.inputType="email",t.inputName="input-email",t.labelText="Ваш email",t.placeholder="Email - address",t.needValidate=!0,t.validateFunction=function(t){return 0==t.length?new h(!1,"Поле не может быть пустым"):/[^a-zA-z@.]/.test(t)?new h(!1,"Поле должно содержать только буквы латинского алфавита"):t.indexOf("@")!=t.lastIndexOf("@")||t.indexOf("@")<1||t.lastIndexOf("@")>t.length-3?new h(!1,"Некорректный email"):new h(!0,"")};var e=new E(t);this.formInstance.push(e)},t.prototype.buildUserMessage=function(){var t=new d;t.allowMultipleSpaces=!0,t.inputType="textarea",t.inputName="input-message",t.labelText="Ваше сообщение",t.placeholder="Ваше сообщение (150 - 1000 символов)",t.needValidate=!0,t.validateFunction=function(t){var e=t.split(" ").join("").length;return 0==e?new h(!1,"Поле не может быть пустым"):e<150?new h(!1,"Поле должно содержать более 150 символов"):e>1e3?new h(!1,"Поле должно содержать менее 1000 символов"):/[^a-zA-zА-Яа-яыё\s-]/.test(t)?new h(!1,"Поле должно содержать только буквы русского или латинского алфавита и дефис"):new h(!0,"")};var e=new E(t);this.formInstance.push(e)},t.prototype.render=function(t){this.formInstance.render(t)},t}(),T=function(){},S=(n(4),new T);S.allowClickIfInvalid=!1,S.needValidate=!0,S.submitButtonText="Оставить сообщение",S.submitCallback=function(t){console.log(t)};var N=new I(S);N.buildNameInput(),N.buildEmailInput(),N.buildUserMessage(),N.render(document.getElementById("form"))}]);
//# sourceMappingURL=app.bundle.js.map